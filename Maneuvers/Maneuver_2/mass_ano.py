
from astropy import units as u
import numpy as np

def get_mass_burned(m_0, TP_orbit, time_of_burn):
    
    #----------------------------------------------------#
    m_0 = (m_0).to(u.kg)
    TP_orbit = TP_orbit.to(u.s)
    time_of_burn = (time_of_burn).to(u.s)
    #----------------------------------------------------#
    #----------------------------------------------------#
    g_0 = 9.80665 * u.m / (u.s * u.s)
    G = 6.67408e-11 * u.m**3 * u.kg**(-1) * u.s**(-2)
    M_Earth = 5.972e24 * u.kg
    R_Earth = (6371 * u.km).to(u.m)
    #----------------------------------------------------#
    #----------------------------------------------------#
    R_orbit = ( (TP_orbit*TP_orbit*G*M_Earth) / (4*np.pi*np.pi) )**(1/3)
    v_0 = np.sqrt(G*M_Earth/R_orbit)
    #----------------------------------------------------#
    m_0 = m_0.to(u.kg)
    I_sp = 4000 * u.s
    T = 400e-3 * u.kg * u.m  / (u.s * u.s) # newtons
    #---------------------------------------------------#
    #---------------------------------------------------#
    v_e = g_0 * I_sp
    p = -1 * T / v_e
    m_f = m_0 + time_of_burn*p
    #---------------------------------------------------#
    v_f = v_0 + v_e * np.log(m_0/m_f)
    #---------------------------------------------------#

    print(v_0, v_f)
    print(m_0, m_f)

    return m_f, v_f
    
def update_R():

    #----------------------------------------------------#
    g_0 = 9.80665 * u.m / (u.s * u.s)
    G = 6.67408e-11 * u.m**3 * u.kg**(-1) * u.s**(-2)
    M_Earth = 5.972e24 * u.kg
    R_Earth = (6371 * u.km).to(u.m)
    #----------------------------------------------------#

